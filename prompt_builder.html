<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>SUNO Style Prompt Builder (JP Labels)</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 20px;
      background: #111;
      color: #eee;
    }
    h1 {
      font-size: 20px;
      margin-bottom: 12px;
    }
    h2 {
      font-size: 16px;
      margin: 18px 0 6px;
    }
    .group {
      margin-bottom: 10px;
      padding-bottom: 6px;
      border-bottom: 1px solid #333;
    }
    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
    }
    label.toggle {
      display: inline-flex;
      align-items: center;
      padding: 4px 8px;
      border-radius: 4px;
      border: 1px solid #555;
      cursor: pointer;
      font-size: 11px;
      user-select: none;
      background: #1c1c1c;
    }
    label.toggle input {
      display: none;
    }
    label.toggle.active {
      background: #3b82f6;
      border-color: #60a5fa;
      color: #fff;
    }
    textarea {
      width: 100%;
      height: 160px;
      margin-top: 10px;
      padding: 8px;
      font-family: "SF Mono", Menlo, Consolas, monospace;
      font-size: 13px;
      background: #050505;
      color: #f5f5f5;
      border: 1px solid #333;
      border-radius: 4px;
      resize: vertical;
      max-width: 480px;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      margin-bottom: 10px;
    }
    button {
      padding: 6px 14px;
      border-radius: 4px;
      border: none;
      font-size: 12px;
      cursor: pointer;
    }
    #copyButton {
      background: #22c55e;
      color: #000;
    }
    #resetButton {
      background: #444;
      color: #eee;
    }
    #randomButton {
      background: #f59e0b;
      color: #000;
    }
    .inline-button {
      margin-left: 8px;
      padding: 4px 10px;
      font-size: 11px;
      vertical-align: middle;
    }
    .bpm-input {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      margin-top: 6px;
    }
    .bpm-input input {
      width: 70px;
      padding: 4px;
      border-radius: 4px;
      border: 1px solid #555;
      background: #050505;
      color: #eee;
    }
    .slider-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 6px 0 10px;
      max-width: 480px;
    }
    .slider-row input[type=range] {
      flex: 1;
      min-width: 220px;
    }
    .free-text {
      height: 80px;
      margin-top: 6px;
      max-width: 480px;
    }
  </style>
</head>
<body>
  <h1>SUNO Style Prompt Builder (JP Labels)</h1>

  <div class="top-bar">
    <div>
      <button id="randomButton">Random</button>
      <button id="resetButton">Reset</button>
    </div>
  </div>

  <!-- 全体 -->
  <div class="group">
    <h2>全体（Overall）</h2>
    <div>世界観（ポジティブ）：</div>
    <div class="btn-row" data-group="feeling-positive">
      <label class="toggle" title="明るい"><input type="checkbox" value="bright">明るい</label>
      <label class="toggle" title="エネルギッシュ"><input type="checkbox" value="energetic">エネルギッシュ</label>
      <label class="toggle" title="喜び・ハッピー"><input type="checkbox" value="joyful">ハッピー</label>
      <label class="toggle" title="希望に満ちた"><input type="checkbox" value="hopeful">希望</label>
      <label class="toggle" title="感謝で満たされた"><input type="checkbox" value="grateful">感謝</label>
      <label class="toggle" title="輝くように明るい"><input type="checkbox" value="radiant">輝く</label>
      <label class="toggle" title="天才的なひらめき感"><input type="checkbox" value="brilliant">天才的</label>
    </div>
    <div>世界観（ネガティブ）：</div>
    <div class="btn-row" data-group="feeling-negative">
      <label class="toggle" title="暗い・陰り"><input type="checkbox" value="dark">暗い</label>
      <label class="toggle" title="悲しい・ハッピーじゃない"><input type="checkbox" value="sad">悲しい</label>
      <label class="toggle" title="切ない"><input type="checkbox" value="bittersweet">切ない</label>
      <label class="toggle" title="希望が持てない"><input type="checkbox" value="hopeless">絶望的</label>
      <label class="toggle" title="自滅的で破壊的"><input type="checkbox" value="self-destructive">自滅的</label>
      <label class="toggle" title="反抗的・反発的"><input type="checkbox" value="rebellious">反抗的</label>
      <label class="toggle" title="ふてぶてしい・無礼"><input type="checkbox" value="insolent">ふてぶてしい</label>
      <label class="toggle" title="生意気で挑発的"><input type="checkbox" value="cheeky">生意気</label>
      <label class="toggle" title="調子に乗ったドヤ感"><input type="checkbox" value="smug">ドヤ感</label>
    </div>
    <div>世界観（昂揚・興奮）：</div>
    <div class="btn-row" data-group="feeling-hype">
      <label class="toggle" title="情熱的"><input type="checkbox" value="passionate">情熱的</label>
      <label class="toggle" title="攻撃的"><input type="checkbox" value="aggressive">アグレッシブ</label>
      <label class="toggle" title="壮大・エピック"><input type="checkbox" value="epic">エピック</label>
      <label class="toggle" title="劇的・ドラマチック"><input type="checkbox" value="dramatic">ドラマチック</label>
      <label class="toggle" title="無鉄砲・突っ走る"><input type="checkbox" value="reckless">無鉄砲</label>
      <label class="toggle" title="衝動的で抑えない"><input type="checkbox" value="impulsive">衝動的</label>
      <label class="toggle" title="若さの勢いで突っ走る"><input type="checkbox" value="youthful rush">若さの突っ走り</label>
    </div>
    <div>世界観（落ち着き）：</div>
    <div class="btn-row" data-group="feeling-calm">
      <label class="toggle" title="穏やか"><input type="checkbox" value="gentle">穏やか</label>
      <label class="toggle" title="安らか"><input type="checkbox" value="serene">安らか</label>
      <label class="toggle" title="瞑想的"><input type="checkbox" value="meditative">瞑想的</label>
      <label class="toggle" title="センチメンタル"><input type="checkbox" value="sentimental">センチメンタル</label>
    </div>
    <div>質感寄り（よく使うニュアンス）：</div>
    <div class="btn-row" data-group="feeling-texture">
      <label class="toggle" title="神秘的・ミステリアス"><input type="checkbox" value="mysterious">ミステリアス</label>
      <label class="toggle" title="肩の力が抜けたチル感"><input type="checkbox" value="chill">チル</label>
      <label class="toggle" title="温かい優しさ"><input type="checkbox" value="warm">温かい</label>
      <label class="toggle" title="クールで無機質"><input type="checkbox" value="cool">クール</label>
      <label class="toggle" title="不穏でざわつく感じ"><input type="checkbox" value="ominous">不穏</label>
      <label class="toggle" title="美しいメロディ感"><input type="checkbox" value="beautiful melody">美メロ</label>
      <label class="toggle" title="美しいコード進行の雰囲気"><input type="checkbox" value="beautiful chords">美コード進行</label>
      <label class="toggle" title="サイバーな世界観"><input type="checkbox" value="cyber">サイバー</label>
      <label class="toggle" title="シンプルでわかりやすい"><input type="checkbox" value="simple">シンプル</label>
      <label class="toggle" title="複雑で入り組んだ"><input type="checkbox" value="complex">複雑</label>
    </div>
    <div>世界観メモ：</div>
    <textarea id="worldNote" class="free-text" placeholder="世界観やイメージを自由にメモ"></textarea>
    <div>歪み感（Dirt）：</div>
    <div class="slider-row">
      <label class="toggle" title="歪み感をプロンプトに含める">
        <input type="checkbox" id="dirtInclude" checked>含める
      </label>
      <input type="range" id="dirtRange" min="0" max="100" value="80" />
      <span id="dirtLabel">80</span>
    </div>
    <div>密度（Density）：</div>
    <div class="slider-row">
      <label class="toggle" title="密度をプロンプトに含める">
        <input type="checkbox" id="densityInclude" checked>含める
      </label>
      <input type="range" id="densityRange" min="0" max="100" value="80" />
      <span id="densityLabel">80</span>
    </div>
    <div class="bpm-input">
      <label class="toggle" title="BPMをプロンプトに含める">
        <input type="checkbox" id="bpmInclude" checked>含める
      </label>
      <span>BPM：</span>
      <input type="number" id="bpmInput" value="111" min="40" max="260" />
    </div>
  </div>

  <!-- ジャンル -->
  <div class="group">
    <h2>ジャンル（Genre）</h2>
    <div class="btn-row" data-group="genre">
      <!-- コア3種（常連） -->
      <label class="toggle" title="グランジ">
        <input type="checkbox" value="grunge">グランジ
      </label>
      <label class="toggle" title="プログレッシブ（ロック／メタル全般を含む広義のprogressive）">
        <input type="checkbox" value="progressive">プログレッシブ
      </label>
      <label class="toggle" title="シューゲイザー">
        <input type="checkbox" value="shoegaze">シューゲイザー
      </label>

      <!-- 方向性をちょい足しできるロック寄りジャンルたち -->
      <label class="toggle" title="ロック全般">
        <input type="checkbox" value="rock">ロック
      </label>
      <label class="toggle" title="ブリットポップ的なキャッチーさ">
        <input type="checkbox" value="britpop">ブリットポップ
      </label>
      <label class="toggle" title="ファンクのグルーヴ感">
        <input type="checkbox" value="funk">ファンク
      </label>
      <label class="toggle" title="エレクトロ寄り全般">
        <input type="checkbox" value="electronic">エレクトロ
      </label>
      <label class="toggle" title="ヒップホップ全般">
        <input type="checkbox" value="hip hop">ヒップホップ
      </label>
      <label class="toggle" title="テクノ全般">
        <input type="checkbox" value="techno">テクノ
      </label>
      <label class="toggle" title="ドラムンベース">
        <input type="checkbox" value="drum & bass">ドラムンベース
      </label>
      <label class="toggle" title="民族音楽系の要素">
        <input type="checkbox" value="ethnic">民族系
      </label>
      <label class="toggle" title="ダンス寄りEDM全般">
        <input type="checkbox" value="edm">EDM
      </label>
      <label class="toggle" title="ダブのディレイ感・揺れ">
        <input type="checkbox" value="dub">ダブ
      </label>
      <label class="toggle" title="ゴスペル的なコーラス/雰囲気">
        <input type="checkbox" value="gospel">ゴスペル
      </label>
    </div>
  </div>

  <!-- ギター -->
  <div class="group">
    <h2>ギター（Guitar）</h2>
    <div>歪み：</div>
    <div class="btn-row" data-group="gtr-dist">
      <label class="toggle" title="高域がキラつくクリーン"><input type="checkbox" value="glassy clean">キラキラクリーン</label>
      <label class="toggle" title="ごく軽いローゲイン歪み"><input type="checkbox" value="low-gain">ローゲイン</label>
      <label class="toggle" title="軽くザラつくクランチ"><input type="checkbox" value="crunch">クランチ</label>
      <label class="toggle" title="アンプを押した自然なドライブ"><input type="checkbox" value="overdrive">オーバードライブ</label>
      <label class="toggle" title="甘めで丸いブルース系ドライブ"><input type="checkbox" value="bluesy drive">ブルース系ドライブ</label>
      <label class="toggle" title="古めの温かいドライブ感"><input type="checkbox" value="vintage drive">ビンテージドライブ</label>
      <label class="toggle" title="潰れた毛羽立つ歪み"><input type="checkbox" value="fuzz">ファズ</label>
      <label class="toggle" title="オクターブ上を足したファズ"><input type="checkbox" value="octave fuzz" checked>オクターブファズ</label>
      <label class="toggle" title="分厚く滑らかなマフ系ファズ"><input type="checkbox" value="muff-style fuzz">マフ系ファズ</label>
      <label class="toggle" title="低域重めで鈍く分厚いドゥーム系"><input type="checkbox" value="doom tone">ドゥーム系</label>
    </div>
    <div>弾き方：</div>
    <div class="btn-row" data-group="gtr-play">
      <label class="toggle" title="単音なしでコードだけ弾く"><input type="checkbox" value="chords only" checked>コードのみ</label>
      <label class="toggle" title="軽くミュートして刻むカッティング"><input type="checkbox" value="cutting">カッティング</label>
      <label class="toggle" title="分散和音中心のアルペジオ"><input type="checkbox" value="arpeggio">アルペジオ</label>
    </div>
    <div>帯域：</div>
    <div class="btn-row" data-group="gtr-eq">
      <label class="toggle" title="中低域が太く腹に来る音"><input type="checkbox" value="low-mid heavy" checked>ロー・ミッド太め</label>
      <label class="toggle" title="中域が前に出るロック向き"><input type="checkbox" value="mid-forward">ミッド前寄り</label>
      <label class="toggle" title="中高域が刺さるギラギラした音"><input type="checkbox" value="upper-mid bite">アッパーミッド強め</label>
      <label class="toggle" title="クセの少ないバランス型"><input type="checkbox" value="balanced">バランス型</label>
    </div>
  </div>

  <!-- キーボード -->
  <div class="group">
    <h2>キーボード（Keys）</h2>
    <div>音色：</div>
    <div class="btn-row" data-group="keys-type">
      <label class="toggle" title="アコースティックピアノ系"><input type="checkbox" value="piano">ピアノ</label>
      <label class="toggle" title="ローズ/ウーリッツァーなどのエレピ系"><input type="checkbox" value="electric piano">エレピ</label>
      <label class="toggle" title="ハモンドなどのオルガン系"><input type="checkbox" value="organ">オルガン</label>
      <label class="toggle" title="シンセパッド"><input type="checkbox" value="synth pad">シンセパッド</label>
      <label class="toggle" title="シンセリード"><input type="checkbox" value="synth lead">シンセリード</label>
    </div>
    <div>質感：</div>
    <div class="btn-row" data-group="keys-tone">
      <label class="toggle" title="ウォームで丸いトーン"><input type="checkbox" value="warm">ウォーム</label>
      <label class="toggle" title="明るくシャイニーなトーン"><input type="checkbox" value="bright">ブライト</label>
      <label class="toggle" title="ローファイで劣化した質感"><input type="checkbox" value="lo-fi">ローファイ</label>
      <label class="toggle" title="アナログっぽい質感"><input type="checkbox" value="analog-ish">アナログ寄り</label>
      <label class="toggle" title="デジタルでクリーンな質感"><input type="checkbox" value="digital clean">デジタルクリーン</label>
    </div>
  </div>

  <!-- ベース -->
  <div class="group">
    <h2>ベース（Bass）</h2>
    <div>弾き方：</div>
    <div class="btn-row" data-group="bass-tech">
      <label class="toggle" title="指で弾く基本スタイル"><input type="checkbox" value="fingerstyle" checked>指弾き</label>
      <label class="toggle" title="ピックで弾くタイトなスタイル"><input type="checkbox" value="pick">ピック</label>
      <label class="toggle" title="スラップで叩く奏法"><input type="checkbox" value="slap">スラップ</label>
    </div>
    <div>奏法：</div>
    <div class="btn-row" data-group="bass-play">
      <label class="toggle" title="ルート音だけを弾く土台役"><input type="checkbox" value="roots only">ルートのみ</label>
      <label class="toggle" title="オクターブ飛び主体の動き"><input type="checkbox" value="octave jumps">オクターブジャンプ</label>
      <label class="toggle" title="ウォーキングで動き続ける"><input type="checkbox" value="walking" checked>ウォーキング</label>
    </div>
    <div>役割：</div>
    <div class="btn-row" data-group="bass-role">
      <label class="toggle" title="低音で土台を支える"><input type="checkbox" value="low end support">低音の土台</label>
      <label class="toggle" title="グルーヴの主役になる"><input type="checkbox" value="groove lead" checked>グルーヴ主導</label>
      <label class="toggle" title="小さな対旋律で彩る"><input type="checkbox" value="counter melody">対旋律</label>
      <label class="toggle" title="短いリフで曲を引っ張る"><input type="checkbox" value="riff lead">リフ主導</label>
    </div>
  </div>

  <!-- ドラム -->
  <div class="group">
    <h2>ドラム（Drums）</h2>
    <div>拍子 / ノリ：</div>
    <div class="btn-row" data-group="drums-meter">
      <label class="toggle" title="変拍子だけど踊れる感じ"><input type="checkbox" value="odd but danceable" checked>変拍子だけど踊れる</label>
      <label class="toggle" title="三連系のノリ"><input type="checkbox" value="triplet feel">三連フィール</label>
      <label class="toggle" title="しっかりしたポリリズム感"><input type="checkbox" value="polyrhythm heavy">ポリリズム</label>
      <label class="toggle" title="標準的な4拍子ロックノリ"><input type="checkbox" value="straight 4/4">4/4</label>
      <label class="toggle" title="4/4のシャッフル・スウィング感"><input type="checkbox" value="shuffle swing">4/4（シャッフル）</label>
      <label class="toggle" title="6/8の揺れ"><input type="checkbox" value="6/8 feel">6/8</label>
      <label class="toggle" title="3/4のワルツ感"><input type="checkbox" value="waltz 3/4">3/4</label>
    </div>
  </div>

  <!-- 出力とボタン -->
  <div class="top-bar">
    <div>↓ ここがコピペ用プロンプト（英語）<button id="copyButton" class="inline-button">Copy</button></div>
  </div>

  <textarea id="output" readonly></textarea>

  <script>
    function updateToggleStyles() {
      document.querySelectorAll("label.toggle").forEach(label => {
        const input = label.querySelector("input");
        if (input.checked) {
          label.classList.add("active");
        } else {
          label.classList.remove("active");
        }
      });
    }

    function getGroupValues(groupName) {
      const group = document.querySelector('.btn-row[data-group="' + groupName + '"]');
      if (!group) return [];
      const vals = [];
      group.querySelectorAll("input[type=checkbox]").forEach(inp => {
        if (inp.checked) vals.push(inp.value);
      });
      return vals;
    }

    function getDensityLabel(val) {
      return String(val);
    }

    function getDirtLabel(val) {
      return String(val);
    }

    function updateSliderLabels() {
      const dVal = Number(document.getElementById("densityRange").value || 0);
      const dirtVal = Number(document.getElementById("dirtRange").value || 0);
      document.getElementById("densityLabel").textContent = String(dVal);
      document.getElementById("dirtLabel").textContent = String(dirtVal);
    }

    function buildPrompt() {
      const genre = getGroupValues("genre");
      const gtr = [
        ...getGroupValues("gtr-dist"),
        ...getGroupValues("gtr-play"),
        ...getGroupValues("gtr-eq"),
      ];
      const keys = [
        ...getGroupValues("keys-type"),
        ...getGroupValues("keys-tone"),
      ];
      const bass = [
        ...getGroupValues("bass-tech"),
        ...getGroupValues("bass-play"),
        ...getGroupValues("bass-role"),
      ];
      const drums = [
        ...getGroupValues("drums-meter"),
        ...getGroupValues("drums-timing"),
        ...getGroupValues("drums-human"),
      ];
      const densityVal = Number(document.getElementById("densityRange").value || 0);
      const dirtVal = Number(document.getElementById("dirtRange").value || 0);
      const density = getDensityLabel(densityVal);
      const dirt = getDirtLabel(dirtVal);
      const densityInclude = document.getElementById("densityInclude").checked;
      const dirtInclude = document.getElementById("dirtInclude").checked;
      const bpmInclude = document.getElementById("bpmInclude").checked;
      const worldNote = document.getElementById("worldNote").value.trim();
      const feeling = [
        ...getGroupValues("feeling-positive"),
        ...getGroupValues("feeling-negative"),
        ...getGroupValues("feeling-hype"),
        ...getGroupValues("feeling-calm"),
        ...getGroupValues("feeling-texture"),
      ];
      const bpm = document.getElementById("bpmInput").value || "";

      const lines = [];
      if (genre.length)   lines.push("ジャンル：" + genre.join(" + "));
      if (gtr.length)     lines.push("ギター：" + gtr.join(" + "));
      if (keys.length)    lines.push("キーボード：" + keys.join(" + "));
      if (bass.length)    lines.push("ベース：" + bass.join(" + "));
      if (drums.length)   lines.push("ドラム：" + drums.join(" + "));
      if (worldNote)      lines.push("世界観メモ：" + worldNote);
      if (density && densityInclude) lines.push("密度：" + density);
      if (dirt && dirtInclude)       lines.push("歪み感：" + dirt);
      if (feeling.length) lines.push("世界観：" + feeling.join(" + "));
      if (bpm && bpmInclude) lines.push("BPM：" + bpm);

      document.getElementById("output").value = lines.join("\n");
    }

    document.querySelectorAll("label.toggle input").forEach(input => {
      input.addEventListener("change", () => {
        updateToggleStyles();
        buildPrompt();
      });
    });

    document.getElementById("bpmInput").addEventListener("input", buildPrompt);
    document.getElementById("densityInclude").addEventListener("change", buildPrompt);
    document.getElementById("dirtInclude").addEventListener("change", buildPrompt);
    document.getElementById("bpmInclude").addEventListener("change", buildPrompt);
    document.getElementById("worldNote").addEventListener("input", buildPrompt);
    document.getElementById("densityRange").addEventListener("input", () => {
      updateSliderLabels();
      buildPrompt();
    });
    document.getElementById("dirtRange").addEventListener("input", () => {
      updateSliderLabels();
      buildPrompt();
    });

    document.getElementById("copyButton").addEventListener("click", async () => {
      const text = document.getElementById("output").value;
      if (!text) return;
      try {
        await navigator.clipboard.writeText(text);
      } catch (e) {
        console.error("clipboard error", e);
      }
    });

    document.getElementById("randomButton").addEventListener("click", () => {
      const inputs = Array.from(
        document.querySelectorAll(
          '.btn-row[data-group="genre"] input,' +
          '.btn-row[data-group="feeling-positive"] input,' +
          '.btn-row[data-group="feeling-negative"] input,' +
          '.btn-row[data-group="feeling-hype"] input,' +
          '.btn-row[data-group="feeling-calm"] input,' +
          '.btn-row[data-group="feeling-texture"] input'
        )
      );
      inputs.forEach(i => (i.checked = false));

      const min = 3;
      const max = 5;
      const count = Math.min(
        inputs.length,
        Math.floor(Math.random() * (max - min + 1)) + min
      );

      for (let i = inputs.length - 1; i > 0; i -= 1) {
        const j = Math.floor(Math.random() * (i + 1));
        [inputs[i], inputs[j]] = [inputs[j], inputs[i]];
      }

      inputs.slice(0, count).forEach(i => (i.checked = true));
      document.getElementById("densityRange").value = Math.floor(Math.random() * 101);
      document.getElementById("dirtRange").value = Math.floor(Math.random() * 101);
      document.getElementById("bpmInput").value = Math.floor(Math.random() * 81) + 60;
      updateToggleStyles();
      updateSliderLabels();
      buildPrompt();
    });

    document.getElementById("resetButton").addEventListener("click", () => {
      document.querySelectorAll("label.toggle input").forEach(i => (i.checked = false));
      updateSliderLabels();
      updateToggleStyles();
      buildPrompt();
    });

    // 初期化
    updateSliderLabels();
    updateToggleStyles();
    buildPrompt();
  </script>
</body>
</html>
